<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Subcontractors | Anchor Homes LLC</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="index.html" class="brand">
        <img src="logo.png" alt="Anchor Homes LLC logo" class="brand-logo" />
        <span class="brand-text">
          <span class="brand-name">Anchor Homes LLC</span>
          <span class="brand-tagline">Custom Homes &amp; Remodeling</span>
        </span>
      </a>

      <button class="nav-toggle" aria-label="Toggle navigation">
        <span></span><span></span><span></span>
      </button>

      <nav class="main-nav">
        <a href="index.html">Home</a>
        <a href="projects.html">Projects</a>
        <a href="subcontractors.html">Subcontractors</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
        <a href="anchor.html">Anchor</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Page heading -->
    <section class="page-header">
      <div class="container">
        <h1>Subcontractor Onboarding</h1>
        <p>
          Welcome to the Anchor Homes LLC subcontractor portal. There are two items we
          need on file from every trade partner: a signed subcontractor agreement and a
          completed W-9. You can complete each form separately using the buttons below.
        </p>
      </div>
    </section>

    <!-- Checklist + buttons -->
    <section class="section">
      <div class="container">
        <div class="form-card">
          <h2 style="margin-top: 0; margin-bottom: 0.75rem;">Your checklist</h2>
          <p style="margin-top: 0; margin-bottom: 1.25rem; font-size: 0.9rem; color: var(--color-text-muted);">
            This page will show which items you’ve completed on this device. After you
            submit each form, you’ll be returned here and the corresponding box will be
            checked.
          </p>

          <!-- Summary pills at top -->
          <div class="sub-summary">
            <div class="summary-pill" id="summary-w9">
              <span class="summary-label">W-9 on file</span>
              <span class="summary-status"></span>
            </div>
            <div class="summary-pill" id="summary-agreement">
              <span class="summary-label">Subcontractor Agreement signed</span>
              <span class="summary-status"></span>
            </div>
          </div>

          <hr class="sub-divider" />

          <!-- Detailed checklist rows -->
          <div class="checklist">
            <!-- W9 row -->
            <div class="checklist-item" id="item-w9">
              <div class="checklist-main">
                <span class="check-icon" aria-hidden="true"></span>
                <div class="check-text">
                  <div class="check-title">Complete and submit W-9</div>
                  <div class="check-caption">
                    IRS W-9 form with your legal name, business name, tax classification,
                    address, and taxpayer ID (SSN or EIN).
                  </div>
                </div>
              </div>
              <div class="check-actions">
                <a href="w9.html" class="btn secondary">
                  Open W-9 form
                </a>
              </div>
            </div>

            <!-- Agreement row -->
            <div class="checklist-item" id="item-agreement">
              <div class="checklist-main">
                <span class="check-icon" aria-hidden="true"></span>
                <div class="check-text">
                  <div class="check-title">Sign subcontractor agreement</div>
                  <div class="check-caption">
                    Anchor Homes LLC blanket subcontractor agreement outlining scope,
                    safety, payment, and insurance requirements.
                  </div>
                </div>
              </div>
              <div class="check-actions">
                <a href="subcontractor-agreement.html" class="btn secondary">
                  Open Agreement
                </a>
              </div>
            </div>
          </div>

          <p style="margin-top: 1.5rem; font-size: 0.82rem; color: var(--color-text-muted);">
            <strong>Note:</strong> The checkmarks shown here are based on this browser only
            (using local storage) and the confirmation link we send you back after each
            Formspree submission. If you switch devices or clear your browser data, you
            may need to complete the checklist again.
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container site-footer-inner">
      <span>&copy; <span id="year"></span> Anchor Homes LLC.</span>
      <span>Thank you for partnering with us.</span>
    </div>
  </footer>

  <script src="scripts.js"></script>
  <script>
    // Year in footer
    document.getElementById("year").textContent = new Date().getFullYear();

    // --- Completion tracking logic ---

    // Keys we use in localStorage
    const W9_KEY = "sub_w9_completed";
    const AGREEMENT_KEY = "sub_agreement_completed";

    // Read URL params (e.g. ?w9=done&agreement=done)
    const params = new URLSearchParams(window.location.search);
    const w9Param = params.get("w9");
    const agreementParam = params.get("agreement");

    // If we came back from a form redirect with ?w9=done, mark it in localStorage
    if (w9Param === "done") {
      localStorage.setItem(W9_KEY, "true");
    }
    if (agreementParam === "done") {
      localStorage.setItem(AGREEMENT_KEY, "true");
    }

    // Current state from localStorage
    const w9Done = localStorage.getItem(W9_KEY) === "true";
    const agreementDone = localStorage.getItem(AGREEMENT_KEY) === "true";

    // Helper to mark checklist UI
    function updateChecklistItem(id, done) {
      const item = document.getElementById(id);
      if (!item) return;
      const icon = item.querySelector(".check-icon");
      const title = item.querySelector(".check-title");

      if (done) {
        item.classList.add("completed");
        if (icon) icon.textContent = "✓";
        if (title) title.classList.add("check-title-done");
      } else {
        item.classList.remove("completed");
        if (icon) icon.textContent = "";
        if (title) title.classList.remove("check-title-done");
      }
    }

    function updateSummary(id, done) {
      const pill = document.getElementById(id);
      if (!pill) return;
      const status = pill.querySelector(".summary-status");
      if (!status) return;

      if (done) {
        pill.classList.add("completed");
        status.textContent = "Completed";
      } else {
        pill.classList.remove("completed");
        status.textContent = "Not yet completed";
      }
    }

    // Apply state to UI
    updateChecklistItem("item-w9", w9Done);
    updateChecklistItem("item-agreement", agreementDone);
    updateSummary("summary-w9", w9Done);
    updateSummary("summary-agreement", agreementDone);
  </script>
</body>
</html>
